<!DOCTYPE html>

<html lang="en">
<head>
<!-- This site uses WordPress Twitter Bootstrap CSS plugin v2.3.1-1 from Worpit http://icwp.io/w/ -->
<link rel="stylesheet" type="text/css" href="http://meandmark.com/blog/wp-content/plugins/wordpress-bootstrap-css/resources/bootstrap-2.3.1/css/bootstrap.css" />
<!-- / WordPress Twitter Bootstrap CSS Plugin from Worpit. -->
  <meta http-equiv="content-type"
        content="text/html; charset=utf-8" />
  <meta name="robots"
        content="all" />

  <title>Me and Mark Publishing</title>
  
	<!-- Include the Twitter Bootstrap CSS that is in styles.css -->
	<link href="http://meandmark.com/blog/wp-content/themes/meandmark/style.css" rel="stylesheet">

	<!-- Load Javascript -->
	    <link rel="alternate" type="application/rss+xml" title="Me and Mark Publishing  &raquo; Instruments: Heap Allocations and Anonymous VM Comments Feed" href="http://meandmark.com/blog/2014/01/instruments-heap-allocations-and-anonymous-vm/feed/" />
<script type='text/javascript' src='http://meandmark.com/blog/wp-includes/js/jquery/jquery.js?ver=1.8.3'></script>
<script type='text/javascript' src='http://meandmark.com/blog/wp-content/plugins/anti-spam/js/anti-spam.js?ver=1.2'></script>
<script type='text/javascript' src='http://meandmark.com/blog/wp-content/themes/meandmark/bootstrap/js/bootstrap.js?ver=3.5'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://meandmark.com/blog/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://meandmark.com/blog/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Setting the Current Working Directory for Xcode Command-Line Projects' href='http://meandmark.com/blog/2013/12/setting-the-current-working-directory-for-xcode-command-line-projects/' />
<link rel='next' title='Base Internationalization' href='http://meandmark.com/blog/2014/01/base-internationalization/' />
<meta name="generator" content="WordPress 3.5" />
<link rel='canonical' href='http://meandmark.com/blog/2014/01/instruments-heap-allocations-and-anonymous-vm/' />
<link rel='shortlink' href='http://meandmark.com/blog/?p=673' />
    
</head>

<body>

	<div class="navbar navbar-inverse">
		<div class="navbar-inner" style="height: auto;">
			<div class="container-fluid">
				<a class="brand" href="/index.html">Me and Mark Publishing</a>
					<ul class="nav">
						<li> 
							<a href="/index.html">Home</a> </li>
						<li> <a href="/books.html">Books</a> </li>
						<li> <a href="/articles.html">Articles</a> </li>
          				<li> <a href="/software.html">Software</a> </li>
           				<li class="active"> <a href="/blog">Blog</a> </li>
           				<li> <a href="/contact.html">Contact</a> </li>
           			</ul>
           	</div> <!-- End container -->
        </div> <!-- End navbar-inner -->
    </div> <!-- End navbar -->
<div class="container-fluid">
    <!-- Start container -->

    <div id="content" class="row">
      <!-- Start main content wrapper -->

      <div class="span9 main">
        <!-- Start content -->
			
				<h1>Instruments: Heap Allocations and Anonymous VM</h1>
    			<p><em>January 6th, 2014</em></p>
    			<p>Filed under: <a href="http://meandmark.com/blog/category/instruments/" title="View all posts in Instruments" rel="category tag">Instruments</a> | 
    			<a href="http://meandmark.com/blog/2014/01/instruments-heap-allocations-and-anonymous-vm/#comments" title="Comment on Instruments: Heap Allocations and Anonymous VM">4 comments</a></p>
    			<p>One change to the Allocations instrument in Instruments 5, which comes with Xcode 5, is that the allocation summary lists the heap allocations and the amount of anonymous VM, which you can see in the following screenshot:</p>
<p><img src="http://meandmark.com/blog/wp-content/uploads/2014/01/Instruments-Anonymous-VM.png" alt="Instruments Anonymous VM" width="600" height="51" border="0" /></p>
<p>Should you focus on the Live Bytes column for heap allocations or anonymous VM? Focus on the heap allocations because your app has more control over heap allocations. Most of the memory allocations your app makes are heap allocations.</p>
<p>The VM in anonymous VM stands for virtual memory. When your app launches, the operating system reserves a block of virtual memory for your application. This block is usually much larger than the amount of memory your app needs. When your app allocates memory, the operating system allocates the memory from the block it reserved.</p>
<p>Remember the second sentence in the previous paragraph. The operating system determines the size of the virtual memory block, not your app. Thatâ€™s why you should focus on the heap allocations instead of anonymous VM. Your app has no control over the size of the anonymous VM.</p>
    			<p>Tags: <a href="http://meandmark.com/blog/tag/xcode-5/" rel="tag">xcode 5</a></p>    			<hr>
				<div id="comments">
	
	
			<h2 id="comments-title">
			4 thoughts on &ldquo;<span>Instruments: Heap Allocations and Anonymous VM</span>&rdquo;		</h2>

		<ol class="commentlist">
					<li class="comment even thread-even depth-1" id="comment-2815">
				<div id="div-comment-2815" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/5b7849a1afb54c1ec21e12042a7f4654?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn"><a href='http://alanduncan.me' rel='external nofollow' class='url'>Alan Duncan</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://meandmark.com/blog/2014/01/instruments-heap-allocations-and-anonymous-vm/comment-page-1/#comment-2815">
			April 2, 2014 at 4:58 am</a>		</div>

		<p>Great observation &#8211; particularly when using heapshot (generation) analysis in Instruments to diagnose unexpected increases in memory utilization.  Anonymous VM may climb and appear to be persistent across heapshots.</p>

		<div class="reply">
				</div>
				</div>
		</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-2833">
				<div id="div-comment-2833" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/3d2486d85e9ee45f6848cc2ee19c1570?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn">Shrek</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://meandmark.com/blog/2014/01/instruments-heap-allocations-and-anonymous-vm/comment-page-1/#comment-2833">
			August 18, 2014 at 10:12 pm</a>		</div>

		<p>My app appears so abnormal, the heap allocation occupied less than 20MB, but the anonymous VM occupied more than 300MB, then, it crashed, i want to know why,help me,thanks.<br />
<a href="http://www.cocoachina.com/ask/questions/show/117899" rel="nofollow">http://www.cocoachina.com/ask/questions/show/117899</a></p>

		<div class="reply">
				</div>
				</div>
		</li>
		<li class="comment byuser comment-author-mark bypostauthor even thread-even depth-1" id="comment-2834">
				<div id="div-comment-2834" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://0.gravatar.com/avatar/a275cc5487ff5c0b58d941bcde5bd020?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn">Mark Szymczyk</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://meandmark.com/blog/2014/01/instruments-heap-allocations-and-anonymous-vm/comment-page-1/#comment-2834">
			August 19, 2014 at 12:37 am</a>		</div>

		<p>Shrek,</p>
<p>I don&#8217;t know why your app crashed. As I said in the post, the operating system controls the size of the anonymous VM, not you, so there&#8217;s nothing I can tell you to do to reduce the size of the anonymous VM. I don&#8217;t know Chinese so I can&#8217;t read the question you linked to.</p>
<p>If you want help, I recommend asking on Stack Overflow. You are going to have to provide more information than what you provided here for anyone on Stack Overflow to help you.</p>

		<div class="reply">
				</div>
				</div>
		</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-2835">
				<div id="div-comment-2835" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://1.gravatar.com/avatar/3d2486d85e9ee45f6848cc2ee19c1570?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=PG' class='avatar avatar-32 photo' height='32' width='32' />		<cite class="fn">Shrek</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://meandmark.com/blog/2014/01/instruments-heap-allocations-and-anonymous-vm/comment-page-1/#comment-2835">
			August 19, 2014 at 5:20 am</a>		</div>

		<p>Thank you.</p>

		<div class="reply">
				</div>
				</div>
		</li>
		</ol>


	
									<div id="respond">
				<h3 id="reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/blog/2014/01/instruments-heap-allocations-and-anonymous-vm/#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="http://meandmark.com/blog/wp-comments-post.php" method="post" id="commentform">
																			<p class="comment-notes">Your email address will not be published. Required fields are marked <span class="required">*</span></p>							<p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" aria-required='true' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" aria-required='true' /></p>
<p class="comment-form-url"><label for="url">Website</label><input id="url" name="url" type="text" value="" size="30" /></p>
												<p class="comment-form-comment"><label for="comment">Comment</label><textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea></p>						<p class="form-allowed-tags">You may use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes:  <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; </code></p>						<p class="form-submit">
							<input name="submit" type="submit" id="submit" value="Post Comment" />
							<input type='hidden' name='comment_post_ID' value='673' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
						</p>
						
<p class="comment-form-anti-spam" style="clear:both;">
	<label for="anti-spam">Current ye@r</label> <span class="required">*</span>
	<input type="hidden" name="anti-spam-0" id="anti-spam-0" value="2015" />
	<input type="text" name="anti-spam" id="anti-spam" size="30" value="" />
</p>

<p class="comment-form-anti-spam-2" style="display:none;">
	<label for="anti-spam-2">Leave this field empty</label> <span class="required">*</span>
	<input type="text" name="anti-spam-2" id="anti-spam-2" size="30" value=""/>
</p>
<p style="display:none;"><input type="text" name="nxts" value="1439361440" /><input type="text" name="nxts_signed" value="c657858b9ec925fb4280a698ee9bfac8db1e3b62" /><input type="text" name="53f5011f25d16afd3252bca232" value="" /><input type="text" name="93806e0416892" value="c33445aeb4ef063fb5d92dcf9588" /></p>					</form>
							</div><!-- #respond -->
						
</div><!-- #comments -->				
			
				
      </div><!-- End content -->

		<div class="span3 sidebar">
			<form role="search" method="get" id="searchform" action="http://meandmark.com/blog/" >
	<div><label class="screen-reader-text" for="s">Search for:</label>
	<input type="text" value="" name="s" id="s" />
	<input type="submit" id="searchsubmit" value="Search" />
	</div>
	</form><h3>Categories</h3>		<ul>
	<li class="cat-item cat-item-6"><a href="http://meandmark.com/blog/category/blog/" title="View all posts filed under Blog">Blog</a>
</li>
	<li class="cat-item cat-item-10"><a href="http://meandmark.com/blog/category/cocoa/" title="View all posts filed under Cocoa">Cocoa</a>
</li>
	<li class="cat-item cat-item-26"><a href="http://meandmark.com/blog/category/game-development/" title="View all posts filed under Game Development">Game Development</a>
</li>
	<li class="cat-item cat-item-23"><a href="http://meandmark.com/blog/category/instruments/" title="View all posts filed under Instruments">Instruments</a>
</li>
	<li class="cat-item cat-item-9"><a href="http://meandmark.com/blog/category/interface-builder/" title="View all posts filed under Interface Builder">Interface Builder</a>
</li>
	<li class="cat-item cat-item-7"><a href="http://meandmark.com/blog/category/mac/" title="View all posts filed under Mac Development">Mac Development</a>
</li>
	<li class="cat-item cat-item-3"><a href="http://meandmark.com/blog/category/none/" title="View all posts filed under None">None</a>
</li>
	<li class="cat-item cat-item-16"><a href="http://meandmark.com/blog/category/opengl/" title="View all posts filed under OpenGL">OpenGL</a>
</li>
	<li class="cat-item cat-item-4"><a href="http://meandmark.com/blog/category/sdl/" title="View all posts filed under SDL">SDL</a>
</li>
	<li class="cat-item cat-item-1"><a href="http://meandmark.com/blog/category/uncategorized/" title="View all posts filed under Uncategorized">Uncategorized</a>
</li>
	<li class="cat-item cat-item-8"><a href="http://meandmark.com/blog/category/version-control/" title="View all posts filed under Version Control">Version Control</a>
</li>
	<li class="cat-item cat-item-5"><a href="http://meandmark.com/blog/category/xcode/" title="View all posts filed under Xcode">Xcode</a>
</li>
		</ul>
<h3>Tags</h3><div class="tagcloud"><a href='http://meandmark.com/blog/tag/clang/' class='tag-link-31' title='1 topic' style='font-size: 8pt;'>clang</a>
<a href='http://meandmark.com/blog/tag/core-data/' class='tag-link-22' title='3 topics' style='font-size: 11.3070866142pt;'>Core Data</a>
<a href='http://meandmark.com/blog/tag/gcc/' class='tag-link-30' title='1 topic' style='font-size: 8pt;'>gcc</a>
<a href='http://meandmark.com/blog/tag/git/' class='tag-link-34' title='1 topic' style='font-size: 8pt;'>git</a>
<a href='http://meandmark.com/blog/tag/github/' class='tag-link-28' title='1 topic' style='font-size: 8pt;'>github</a>
<a href='http://meandmark.com/blog/tag/java/' class='tag-link-20' title='1 topic' style='font-size: 8pt;'>Java</a>
<a href='http://meandmark.com/blog/tag/llvm/' class='tag-link-32' title='1 topic' style='font-size: 8pt;'>llvm</a>
<a href='http://meandmark.com/blog/tag/opengl-profiler/' class='tag-link-17' title='1 topic' style='font-size: 8pt;'>OpenGL Profiler</a>
<a href='http://meandmark.com/blog/tag/pyglet/' class='tag-link-35' title='2 topics' style='font-size: 9.9842519685pt;'>pyglet</a>
<a href='http://meandmark.com/blog/tag/redmine/' class='tag-link-33' title='1 topic' style='font-size: 8pt;'>redmine</a>
<a href='http://meandmark.com/blog/tag/sdl2/' class='tag-link-37' title='1 topic' style='font-size: 8pt;'>sdl2</a>
<a href='http://meandmark.com/blog/tag/sdl_image/' class='tag-link-21' title='1 topic' style='font-size: 8pt;'>SDL_image</a>
<a href='http://meandmark.com/blog/tag/shark/' class='tag-link-19' title='1 topic' style='font-size: 8pt;'>Shark</a>
<a href='http://meandmark.com/blog/tag/swift/' class='tag-link-39' title='5 topics' style='font-size: 13.2913385827pt;'>swift</a>
<a href='http://meandmark.com/blog/tag/textwrangler/' class='tag-link-27' title='1 topic' style='font-size: 8pt;'>textwrangler</a>
<a href='http://meandmark.com/blog/tag/unit-testing/' class='tag-link-25' title='13 topics' style='font-size: 17.3700787402pt;'>unit testing</a>
<a href='http://meandmark.com/blog/tag/xcode-3-2/' class='tag-link-14' title='9 topics' style='font-size: 15.7165354331pt;'>xcode 3.2</a>
<a href='http://meandmark.com/blog/tag/xcode-4/' class='tag-link-29' title='36 topics' style='font-size: 22pt;'>xcode 4</a>
<a href='http://meandmark.com/blog/tag/xcode-5/' class='tag-link-38' title='22 topics' style='font-size: 19.6850393701pt;'>xcode 5</a>
<a href='http://meandmark.com/blog/tag/xcode-6/' class='tag-link-40' title='6 topics' style='font-size: 14.062992126pt;'>xcode 6</a>
<a href='http://meandmark.com/blog/tag/xcode-7/' class='tag-link-41' title='2 topics' style='font-size: 9.9842519685pt;'>xcode 7</a>
<a href='http://meandmark.com/blog/tag/xcode-book/' class='tag-link-24' title='18 topics' style='font-size: 18.8031496063pt;'>xcode book</a></div>
<h3>Meta</h3>			<ul>
						<li><a href="http://meandmark.com/blog/wp-login.php">Log in</a></li>
			<li><a href="http://meandmark.com/blog/feed/" title="Syndicate this site using RSS 2.0">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://meandmark.com/blog/comments/feed/" title="The latest comments to all posts in RSS">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>
						</ul>
	
        </div> <!-- End sidebar -->
    </div><!-- End main content wrapper -->

</div> <!-- End container-fluid -->

<hr>

      <footer>
        <p>&copy; Me and Mark Publishing</p>
      </footer>

    </div> <!-- /container -->
    
    <!-- Javascript
    ================================================== -->
    <script src="../assets/js/jquery.js"></script>
    <script src="../assets/js/bootstrap.js"></script>

  </body>
</html>